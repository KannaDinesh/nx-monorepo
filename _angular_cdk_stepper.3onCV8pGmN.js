import{_IdGenerator as g,FocusKeyManager as I}from"@angular/cdk/a11y";import{Directionality as v,BidiModule as C}from"@angular/cdk/bidi";import{hasModifierKey as E,SPACE as D,ENTER as k}from"@angular/cdk/keycodes";import*as i from"@angular/core";import{inject as o,ElementRef as y,TemplateRef as m,InjectionToken as b,EventEmitter as h,booleanAttribute as l,ChangeDetectorRef as S,QueryList as _,numberAttribute as x}from"@angular/core";import{ControlContainer as M}from"@angular/forms";import{_getFocusedElementPierceShadowDom as O}from"@angular/cdk/platform";import{Subject as R,of as w}from"rxjs";import{startWith as c,takeUntil as p}from"rxjs/operators";var A=["*"];function L(r,H){r&1&&i.\u0275\u0275projection(0)}var T=(()=>{class r{_elementRef=o(y);constructor(){}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=i.\u0275\u0275defineDirective({type:r,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]})}return r})(),N=(()=>{class r{template=o(m);constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=i.\u0275\u0275defineDirective({type:r,selectors:[["","cdkStepLabel",""]]})}return r})(),f=class{selectedIndex;previouslySelectedIndex;selectedStep;previouslySelectedStep},a={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},P=new b("STEPPER_GLOBAL_OPTIONS"),F=(()=>{class r{_stepperOptions;_stepper=o(u);_displayDefaultIndicatorType;stepLabel;_childForms;content;stepControl;interacted=!1;interactedStream=new h;label;errorMessage;ariaLabel;ariaLabelledby;state;editable=!0;optional=!1;get completed(){return this._completedOverride==null?this._getDefaultCompleted():this._completedOverride}set completed(e){this._completedOverride=e}_completedOverride=null;_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError==null?this._getDefaultError():this._customError}set hasError(e){this._customError=e}_customError=null;_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(){let e=o(P,{optional:!0});this._stepperOptions=e||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this.interacted=!1,this._completedOverride!=null&&(this._completedOverride=!1),this._customError!=null&&(this._customError=!1),this.stepControl&&(this._childForms?.forEach(e=>e.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError!=null}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=i.\u0275\u0275defineComponent({type:r,selectors:[["cdk-step"]],contentQueries:function(t,s,n){if(t&1&&(i.\u0275\u0275contentQuery(n,N,5),i.\u0275\u0275contentQuery(n,M,5)),t&2){let d;i.\u0275\u0275queryRefresh(d=i.\u0275\u0275loadQuery())&&(s.stepLabel=d.first),i.\u0275\u0275queryRefresh(d=i.\u0275\u0275loadQuery())&&(s._childForms=d)}},viewQuery:function(t,s){if(t&1&&i.\u0275\u0275viewQuery(m,7),t&2){let n;i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(s.content=n.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",l],optional:[2,"optional","optional",l],completed:[2,"completed","completed",l],hasError:[2,"hasError","hasError",l]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[i.\u0275\u0275NgOnChangesFeature],ngContentSelectors:A,decls:1,vars:0,template:function(t,s){t&1&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,L,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return r})(),u=(()=>{class r{_dir=o(v,{optional:!0});_changeDetectorRef=o(S);_elementRef=o(y);_destroyed=new R;_keyManager;_steps;steps=new _;_stepHeader;_sortedHeaders=new _;linear=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this.steps&&this._steps?(this._isValidIndex(e),this.selected?._markAsInteracted(),this._selectedIndex!==e&&!this._anyControlsInvalidOrPending(e)&&(e>=this._selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e)):this._selectedIndex=e}_selectedIndex=0;get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}selectionChange=new h;selectedIndexChange=new h;_groupId=o(g).getId("cdk-stepper-");get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}_orientation="horizontal";constructor(){}ngAfterContentInit(){this._steps.changes.pipe(c(this._steps),p(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(t=>t._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(c(this._stepHeader),p(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((t,s)=>t._elementRef.nativeElement.compareDocumentPosition(s._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new I(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),(this._dir?this._dir.change:w()).pipe(c(this._layoutDirection()),p(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`${this._groupId}-label-${e}`}_getStepContentId(e){return`${this._groupId}-content-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let t=e-this._selectedIndex;return t<0?this._layoutDirection()==="rtl"?"next":"previous":t>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getIndicatorType(e,t=a.NUMBER){let s=this.steps.toArray()[e],n=this._isCurrentStep(e);return s._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(s,n):this._getGuidelineLogic(s,n,t)}_getDefaultIndicatorLogic(e,t){return e._showError()&&e.hasError&&!t?a.ERROR:!e.completed||t?a.NUMBER:e.editable?a.EDIT:a.DONE}_getGuidelineLogic(e,t,s=a.NUMBER){return e._showError()&&e.hasError&&!t?a.ERROR:e.completed&&!t?a.DONE:e.completed&&t?s:e.editable&&t?a.EDIT:s}_isCurrentStep(e){return this._selectedIndex===e}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(e){let t=this.steps.toArray();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:this._selectedIndex,selectedStep:t[e],previouslySelectedStep:t[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e),this._selectedIndex=e,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(e){let t=E(e),s=e.keyCode,n=this._keyManager;n.activeItemIndex!=null&&!t&&(s===D||s===k)?(this.selectedIndex=n.activeItemIndex,e.preventDefault()):n.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(t=>{let s=t.stepControl;return(s?s.invalid||s.pending||!t.interacted:!t.completed)&&!t.optional&&!t._completedOverride}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,t=O();return e===t||e.contains(t)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=i.\u0275\u0275defineDirective({type:r,selectors:[["","cdkStepper",""]],contentQueries:function(t,s,n){if(t&1&&(i.\u0275\u0275contentQuery(n,F,5),i.\u0275\u0275contentQuery(n,T,5)),t&2){let d;i.\u0275\u0275queryRefresh(d=i.\u0275\u0275loadQuery())&&(s._steps=d),i.\u0275\u0275queryRefresh(d=i.\u0275\u0275loadQuery())&&(s._stepHeader=d)}},inputs:{linear:[2,"linear","linear",l],selectedIndex:[2,"selectedIndex","selectedIndex",x],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"]})}return r})(),re=(()=>{class r{_stepper=o(u);type="submit";constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=i.\u0275\u0275defineDirective({type:r,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(t,s){t&1&&i.\u0275\u0275listener("click",function(){return s._stepper.next()}),t&2&&i.\u0275\u0275hostProperty("type",s.type)},inputs:{type:"type"}})}return r})(),se=(()=>{class r{_stepper=o(u);type="button";constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=i.\u0275\u0275defineDirective({type:r,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(t,s){t&1&&i.\u0275\u0275listener("click",function(){return s._stepper.previous()}),t&2&&i.\u0275\u0275hostProperty("type",s.type)},inputs:{type:"type"}})}return r})(),ne=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=i.\u0275\u0275defineNgModule({type:r});static \u0275inj=i.\u0275\u0275defineInjector({imports:[C]})}return r})();export{F as CdkStep,T as CdkStepHeader,N as CdkStepLabel,u as CdkStepper,ne as CdkStepperModule,re as CdkStepperNext,se as CdkStepperPrevious,P as STEPPER_GLOBAL_OPTIONS,a as STEP_STATE,f as StepperSelectionEvent};
